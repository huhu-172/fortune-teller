<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‰“å·¥ç‰›é©¬æ¯æ—¥è¿åŠ¿</title>
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            color: #333;
        }

        .container {
            text-align: center;
            max-width: 600px;
            width: 100%;
        }

        h1 {
            color: #3a2e22;
            margin-bottom: 10px;
            font-size: 2.2rem;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
            font-weight: 700;
            letter-spacing: 2px;
        }

        .subtitle {
            color: #6b5b4a;
            margin-bottom: 30px;
            font-size: 1.1rem;
            font-style: italic;
        }

        .temple-container {
            position: relative;
            width: 200px;
            height: 300px;
            margin: 0 auto 30px;
            perspective: 1000px;
        }

        .sign-bucket {
            width: 180px;
            height: 250px;
            background: linear-gradient(to bottom, #ff7f7f, #ff5e5e);
            border-radius: 10px;
            position: relative;
            margin: 0 auto;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            transform-style: preserve-3d;
            transition: transform 0.5s;
            background-image: linear-gradient(to bottom, #ff7f7f, #ff5e5e),
                linear-gradient(45deg, rgba(255, 255, 255, 0.3) 25%, transparent 25%, transparent 75%, rgba(255, 255, 255, 0.3) 75%),
                linear-gradient(-45deg, rgba(255, 255, 255, 0.3) 25%, transparent 25%, transparent 75%, rgba(255, 255, 255, 0.3) 75%);
            background-size: 100%, 20px 20px, 20px 20px;
            background-position: 0 0, 0 0, 0 0;
            animation: lightMove 5s linear infinite;
        }

        .sign-bucket:before {
            content: '';
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            height: 30px;
            background: #ff3e3e;
            border-radius: 50% 50% 0 0;
        }

        .sign-bucket:after {
            content: 'ç¼˜';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.5rem;
            font-weight: bold;
            color: #3a2e22;
            background-color: rgba(255, 255, 255, 0.8);
            padding: 10px;
            border-radius: 50%;
        }

        .sign-bucket:hover {
            transform: translateY(-5px);
            animation-duration: 2s;
        }

        .sign-bucket.shaking {
            animation: bucket-shake 1s ease-in-out infinite;
        }

        @keyframes bucket-shake {
            0%,
            100% {
                transform: rotate(0deg);
            }

            25% {
                transform: rotate(-10deg);
            }

            75% {
                transform: rotate(10deg);
            }
        }

        @keyframes vibrate {
            0% {
                transform: translateX(0);
            }

            20% {
                transform: translateX(-5px);
            }

            40% {
                transform: translateX(5px);
            }

            60% {
                transform: translateX(-5px);
            }

            80% {
                transform: translateX(5px);
            }

            100% {
                transform: translateX(0);
            }
        }

        .sign-bucket.vibrate {
            animation: vibrate 0.3s ease;
        }

        @keyframes rotate {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        @keyframes lightMove {
            0% {
                background-position: 0 0, 0 0, 0 0;
            }

            100% {
                background-position: 0 0, -20px -20px, 20px 20px;
            }
        }

        .sign-stick {
            position: absolute;
            top: -80px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 0;
            background: linear-gradient(to bottom, #ffb3b3, #ff8c8c);
            border-radius: 3px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: height 0.5s ease-out;
            z-index: 5;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #3a2e22;
            font-weight: bold;
            overflow: hidden;
            writing-mode: vertical-rl;
            text-orientation: upright;
            opacity: 0;
        }

        .sign-stick.show {
            height: 80px;
            animation: fall 1.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards,
                swing 2s ease-in-out infinite alternate;
        }

        @keyframes fall {
            0% {
                top: -80px;
                opacity: 0;
                transform: translateX(-50%) rotate(0deg);
            }

            60% {
                top: -20px;
                opacity: 1;
                transform: translateX(-50%) rotate(10deg);
            }

            100% {
                top: 20px;
                opacity: 1;
                transform: translateX(-50%) rotate(10deg);
            }
        }

        @keyframes swing {
            0% {
                transform: translateX(-50%) rotate(10deg);
            }

            100% {
                transform: translateX(-50%) rotate(-10deg);
            }
        }

        .result-container {
            background: linear-gradient(to bottom, #fdfdfd, #f5f5f5);
            border-radius: 5px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            margin-top: 30px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
            border: 1px solid #e0e0e0;
            position: relative;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .result-container.show {
            opacity: 1;
            transform: translateY(0);
        }

        .result-title {
            font-size: 1.8rem;
            margin-bottom: 15px;
            color: #3a2e22;
            font-weight: 700;
            border-bottom: 2px solid #ff7f7f;
            padding-bottom: 10px;
            display: inline-block;
        }

        .result-desc {
            color: #5a4a3a;
            text-align: left;
        }

        .bad .result-title {
            color: #991b1b;
        }

        .average .result-title {
            color: #92400e;
        }

        .good .result-title {
            color: #065f46;
        }

        .great .result-title {
            color: #3730a3;
        }

        .confetti {
            position: fixed;
            width: 15px;
            height: 15px;
            background-color: #f59e0b;
            opacity: 0;
            z-index: 100;
            border-radius: 50%;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg) scale(1);
                opacity: 1;
            }

            100% {
                transform: translateY(100vh) rotate(360deg) scale(0.5);
                opacity: 0;
            }
        }

        .controls {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }

        .control-btn {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid #ff7f7f;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
            color: #ff7f7f;
        }

        .control-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            background: #ff7f7f;
            color: white;
        }

        .control-btn svg {
            width: 24px;
            height: 24px;
        }

        .share-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, #ff7f7f, #ff5e5e);
            color: white;
            border: none;
            border-radius: 30px;
            padding: 12px 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(255, 127, 127, 0.3);
            transition: all 0.3s ease;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .share-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(255, 127, 127, 0.4);
            background: linear-gradient(135deg, #ff5e5e, #ff7f7f);
        }

        .share-btn svg {
            width: 20px;
            height: 20px;
        }

        @media (max-width: 600px) {
            .control-btn {
                width: 40px;
                height: 40px;
            }

            .share-btn {
                padding: 10px 20px;
                font-size: 1rem;
            }
        }

        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 12px 24px;
            border-radius: 30px;
            font-size: 1rem;
            z-index: 1000;
            opacity: 0;
            transition: all 0.3s ease;
        }
        
        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>æ‰“å·¥ç‰›é©¬è¿åŠ¿ç­¾</h1>
        <p class="subtitle">è™”è¯šä¸€æ‘‡ï¼Œé¢„çŸ¥ä»Šæ—¥èŒåœºå‰å‡¶</p>

        <div class="temple-container">
            <div class="sign-bucket" id="signBucket">
                <div class="sign-stick" id="signStick"></div>
            </div>
        </div>

        <div class="result-container" id="resultContainer">
            <h2 class="result-title" id="resultTitle"></h2>
            <p class="result-desc" id="resultDesc"></p>
        </div>
    </div>

    <!-- æ§åˆ¶æŒ‰é’® -->
    <div class="controls">
        <button class="control-btn" id="soundToggle" title="éŸ³æ•ˆå¼€å…³">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M11 5L6 9H2v6h4l5 4V5z"></path>
                <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>
            </svg>
        </button>
    </div>

    <!-- åŠ è½½åŠ¨ç”» -->
    <div class="loading" id="loading">
        <div class="loading-spinner"></div>
    </div>

    <!-- åˆ†äº«æŒ‰é’® -->
    <button class="share-btn" id="shareBtn" style="display: none;">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="18" cy="5" r="3"></circle>
            <circle cx="6" cy="12" r="3"></circle>
            <circle cx="18" cy="19" r="3"></circle>
            <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
            <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
        </svg>
        åˆ†äº«è¿åŠ¿
    </button>

    <!-- éŸ³æ•ˆå…ƒç´  -->
    <audio id="shakeSound" src="sounds/shake.mp3" preload="auto"></audio>
    <audio id="signAppearSound" src="sounds/sign_appear.mp3" preload="auto"></audio>
    <audio id="goodFortuneSound" src="sounds/good_fortune.mp3" preload="auto"></audio>
    <audio id="badFortuneSound" src="sounds/bad_fortune.mp3" preload="auto"></audio>

    <script>
        // è¿åŠ¿æ•°æ®
        const fortunes = [
            {
                type: 'bad',
                title: 'ä¸‹ä¸‹ç­¾ï¼šåœ°ç‹±æ‰“å·¥æ—¥',
                desc: 'ğŸ¯<b>ä»Šæ—¥è¿åŠ¿</b>ï¼šæ­¤ç­¾ä¸»å‡¶ï¼Œä½ å°±ç­‰ç€å§ï¼Œä»Šå¤©è€æ¿å¿ƒæƒ…é‚£å«ä¸€ä¸ªå·®ï¼Œä¼šè®®åƒè¿ç¯ç‚®ä¸€æ ·æœä½ è½°æ¥ï¼ŒåŠ ç­æ›´æ˜¯è·‘éƒ½è·‘ä¸æ‰ï¼Œä½ å°±æ…¢æ…¢ç†¬å§ã€‚\n\nğŸ’¡<b>å»ºè®®</b>ï¼šå¤šå¤‡å‡ åŒ…é€Ÿæº¶å’–å•¡ï¼Œæ‰‹æœºå……å¥½ç”µï¼Œå‡†å¤‡è¿æ¥è¿™åœºæš´é£é›¨ï¼Œè¯´ä¸å®šè¿˜èƒ½åœ¨æ— å°½çš„åŠ ç­ä¸­æ‰¾åˆ°"ä¹è¶£"å‘¢ã€‚\n\nğŸ<b>å¹¸è¿ç‰©</b>ï¼šæ— ï¼Œä»Šå¤©ä½ å°±åˆ«æŒ‡æœ›å¹¸è¿ç‰©èƒ½æ‹¯æ•‘ä½ äº†ã€‚\n\nâœ…<b>å®œ</b>ï¼šè£…ç—…è¯·å‡ï¼Œèƒ½èº²ä¸€æ—¶æ˜¯ä¸€æ—¶ã€‚\n\nâŒ<b>å¿Œ</b>ï¼šé¡¶æ’ä¸Šå¸ï¼Œä¸ç„¶ä½ ä¼šçŸ¥é“èŠ±å„¿ä¸ºä»€ä¹ˆè¿™æ ·çº¢ã€‚',
                color: '#991b1b'
            },
            {
                type: 'bad',
                title: 'ä¸‹ç­¾ï¼šç‰›é©¬åŠ³ç¢Œå‘½',
                desc: 'ğŸ¯<b>ä»Šæ—¥è¿åŠ¿</b>ï¼šæ­¤ç­¾ä¸»åŠ³ï¼Œä»Šå¤©çš„å·¥ä½œé‡æ˜¯å¹³å¸¸çš„3å€ï¼Œå¯å·¥èµ„ä¸€åˆ†éƒ½ä¸ä¼šå¤šç»™ä½ ï¼Œä½ å°±åƒå¤´è€é»„ç‰›ä¸€æ ·ï¼Œç´¯æ­»ç´¯æ´»è¿˜æ²¡å›æŠ¥ã€‚\n\nğŸ’¡<b>å»ºè®®</b>ï¼šä¹°ä¸ªè§£å‹ç©å…·å§ï¼Œæ²¡äº‹æä¸€æï¼Œä¸ç„¶ä½ å¯èƒ½ä¼šè¢«è¿™ç ´å·¥ä½œé€¼ç–¯ã€‚\n\nğŸ<b>å¹¸è¿ç‰©</b>ï¼šè§£å‹ç©å…·ï¼Œå¸Œæœ›å®ƒèƒ½ç»™ä½ å¸¦æ¥ä¸€ä¸æ…°è—‰ã€‚\n\nâœ…<b>å®œ</b>ï¼šå¸¦è–ªå¦‚å•ï¼Œèƒ½æ‘¸ä¸€ä¼šå„¿æ˜¯ä¸€ä¼šå„¿ã€‚\n\nâŒ<b>å¿Œ</b>ï¼šä¸»åŠ¨åŠ ç­ï¼Œä½ æ˜¯å«Œè‡ªå·±è¿˜ä¸å¤Ÿç´¯å—ï¼Ÿ\n\næ‘¸é±¼æŒ‡æ•°ï¼šâ˜…â˜†â˜†â˜†â˜†',
                color: '#92400e'
            },
            {
                type: 'bad',
                title: 'ä¸‹ç­¾ï¼šèŒåœºèƒŒé”…ä¾ ',
                desc: 'ğŸ¯<b>ä»Šæ—¥è¿åŠ¿</b>ï¼šæ­¤ç­¾ä¸»è¡°ï¼Œä¸çŸ¥é“å“ªä¸ªå€’éœ‰ç©æ„å„¿æŠŠé”…ç”©ç»™ä½ äº†ï¼Œä½ ä»Šå¤©å°±ç­‰ç€æ›¿åˆ«äººæ“¦å±è‚¡å§ï¼Œä¸šç»©æ˜¯åˆ«äººçš„ï¼Œé»‘é”…æ˜¯ä½ çš„ã€‚\n\nğŸ’¡<b>å»ºè®®</b>ï¼šå­¦ä¼šç”©é”…ï¼Œåˆ«å‚»ä¹ä¹åœ°å…¨å¾€è‡ªå·±èº«ä¸Šæ½ï¼Œä¸ç„¶ä½ ä¼šè¢«å‹å¾—å–˜ä¸è¿‡æ°”æ¥ã€‚\n\nğŸ<b>å¹¸è¿ç‰©</b>ï¼šé¿é›·é’ˆï¼Œç¥ˆæ±‚åˆ«å†è¢«é›·åŠˆäº†ã€‚\n\nâœ…<b>å®œ</b>ï¼šåŠæ—¶æ²Ÿé€šï¼ŒæŠŠäº‹æƒ…è¯´æ¸…æ¥šã€‚\n\nâŒ<b>å¿Œ</b>ï¼šç‹¬è‡ªæ‰¿æ‹…ï¼Œä½ æ²¡é‚£ä¹ˆä¼Ÿå¤§ã€‚\n\næ‘¸é±¼æŒ‡æ•°ï¼šâ˜…â˜†â˜†â˜†â˜†',
                color: '#92400e'
            },
            {
                type: 'bad',
                title: 'ä¸‹ç­¾ï¼šåŒäº‹æŒ–å‘ç‹',
                desc: 'ğŸ¯<b>ä»Šæ—¥è¿åŠ¿</b>ï¼šæ­¤ç­¾ä¸»å‘ï¼Œä½ çš„åŒäº‹ä»Šå¤©å°±åƒä¸€ç¾¤æŒ–å‘å°èƒ½æ‰‹ï¼Œåˆ°å¤„ç»™ä½ è®¾é™·é˜±ï¼Œä½ ä¸€ä¸å°å¿ƒå°±ä¼šæ‰è¿›å»ã€‚\n\nğŸ’¡<b>å»ºè®®</b>ï¼šå¤šé•¿ä¸ªå¿ƒçœ¼ï¼Œåˆ«è¢«ä»–ä»¬çš„èŠ±è¨€å·§è¯­éª—äº†ï¼Œä¸ç„¶ä½ æ€ä¹ˆæ­»çš„éƒ½ä¸çŸ¥é“ã€‚\n\nğŸ<b>å¹¸è¿ç‰©</b>ï¼šæ¢é›·å™¨ï¼Œæå‰å‘ç°é™·é˜±ã€‚\n\nâœ…<b>å®œ</b>ï¼šè°¨æ…è¡Œäº‹ï¼Œåˆ«è½»æ˜“ç›¸ä¿¡åˆ«äººã€‚\n\nâŒ<b>å¿Œ</b>ï¼šç›²ç›®è·Ÿé£ï¼Œè·Ÿç€ä»–ä»¬åªä¼šä¸€èµ·æ‰å‘é‡Œã€‚\n\næ‘¸é±¼æŒ‡æ•°ï¼šâ˜…â˜†â˜†â˜†â˜†',
                color: '#92400e'
            },
            {
                type: 'bad',
                title: 'ä¸‹ç­¾ï¼šæ–¹æ¡ˆè¢«æ¯™æ—¥',
                desc: 'ğŸ¯<b>ä»Šæ—¥è¿åŠ¿</b>ï¼šæ­¤ç­¾ä¸»è´¥ï¼Œä½ ç²¾å¿ƒå‡†å¤‡çš„æ–¹æ¡ˆä»Šå¤©å¤§æ¦‚ç‡ä¼šè¢«æ¯™æ‰ï¼Œä¸ç®¡ä½ æ€ä¹ˆåŠªåŠ›ï¼Œé¢†å¯¼å°±æ˜¯ä¸æ»¡æ„ï¼Œä½ å°±ç™½å¿™æ´»ä¸€åœºå§ã€‚\n\nğŸ’¡<b>å»ºè®®</b>ï¼šæå‰æƒ³å¥½å¤‡ç”¨æ–¹æ¡ˆï¼Œåˆ«åˆ°æ—¶å€™æŠ“çã€‚\n\nğŸ<b>å¹¸è¿ç‰©</b>ï¼šæ©¡çš®æ“¦ï¼ŒæŠŠä¸å¥½çš„éƒ½æ“¦æ‰ã€‚\n\nâœ…<b>å®œ</b>ï¼šè™šå¿ƒæ¥å—æ„è§ï¼Œé‡æ–°ä¿®æ”¹ã€‚\n\nâŒ<b>å¿Œ</b>ï¼šå›ºæ‰§å·±è§ï¼Œä¸ç„¶æ–¹æ¡ˆæ°¸è¿œè¿‡ä¸äº†ã€‚\n\næ‘¸é±¼æŒ‡æ•°ï¼šâ˜…â˜†â˜†â˜†â˜†',
                color: '#92400e'
            },
            {
                type: 'average',
                title: 'ä¸­å¹³ç­¾ï¼šæ™®é€šç¤¾ç•œæ—¥',
                desc: 'ğŸ¯<b>ä»Šæ—¥è¿åŠ¿</b>ï¼šæ­¤ç­¾å¹³å¹³ï¼Œä»Šå¤©æ²¡å•¥å¤§é£å¤§æµªï¼Œè€æ¿ç”»çš„é¥¼ä¾æ—§åˆå¤§åˆåœ†ï¼Œä½ å°±ç»§ç»­åœ¨è¿™è™šå¹»çš„å¤§é¥¼ä¸‹è‹Ÿå»¶æ®‹å–˜å§ã€‚\n\nğŸ’¡<b>å»ºè®®</b>ï¼šå’–å•¡ç»­å‘½é‡ï¼š2æ¯ï¼Œä¸ç„¶ä½ å¯èƒ½ä¼šåœ¨è¿™æ— èŠçš„å·¥ä½œä¸­ç¡ç€ã€‚\n\nğŸ<b>å¹¸è¿ç‰©</b>ï¼šå’–å•¡æ¯ï¼Œé ç€å’–å•¡æ’‘è¿‡è¿™ä¸€å¤©ã€‚\n\nâœ…<b>å®œ</b>ï¼šå‡è£…å¿™ç¢Œï¼Œåˆ«è®©è€æ¿çœ‹å‡ºä½ åœ¨æ‘¸é±¼ã€‚\n\nâŒ<b>å¿Œ</b>ï¼šæ•ˆç‡è¿‡é«˜ï¼Œä¸ç„¶è€æ¿ä¼šç»™ä½ å®‰æ’æ›´å¤šçš„æ´»ã€‚\n\næ‘¸é±¼æŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜†â˜†',
                color: '#854d0e'
            },
            {
                type: 'average',
                title: 'ä¸­ç­¾ï¼šèŒåœºå°é€æ˜',
                desc: 'ğŸ¯<b>ä»Šæ—¥è¿åŠ¿</b>ï¼šæ­¤ç­¾ä¸»éšï¼Œä»Šå¤©ä½ çš„å­˜åœ¨æ„Ÿä¸ºé›¶ï¼Œå°±åƒç©ºæ°”ä¸€æ ·ï¼Œé¢†å¯¼çœ‹ä¸è§ä½ ï¼ŒåŒäº‹ä¹Ÿæƒ³ä¸èµ·ä½ ï¼Œæ­£å¥½é€‚åˆå®‰é™æ‘¸é±¼ã€‚\n\nğŸ’¡<b>å»ºè®®</b>ï¼šåœ¨é¢†å¯¼é¢å‰å‡è£…å¾ˆå¿™ï¼Œåˆ«è¢«å‘ç°ä½ åœ¨å·æ‡’ã€‚\n\nğŸ<b>å¹¸è¿ç‰©</b>ï¼šéšèº«è¡£ï¼Œè®©ä½ æ›´å¥½åœ°éšè—è‡ªå·±ã€‚\n\nâœ…<b>å®œ</b>ï¼šä½è°ƒè¡Œäº‹ï¼Œåˆ«æƒ¹éº»çƒ¦ã€‚\n\nâŒ<b>å¿Œ</b>ï¼šå¼•äººæ³¨ç›®ï¼Œä¸ç„¶ä½ ä¼šæˆä¸ºä¼—çŸ¢ä¹‹çš„ã€‚\n\nå±é™©æ—¶æ®µï¼šä¸‹åˆ3ç‚¹',
                color: '#a16207'
            },
            {
                type: 'good',
                title: 'ä¸­å‰ç­¾ï¼šæ‘¸é±¼å°èƒ½æ‰‹',
                desc: 'ğŸ¯<b>ä»Šæ—¥è¿åŠ¿</b>ï¼šæ­¤ç­¾ä¸»é€¸ï¼Œä»Šå¤©ä½ çš„å·¥ä½œè¿è¿˜ä¸é”™ï¼Œèƒ½é«˜æ•ˆå®Œæˆå·¥ä½œï¼Œç„¶åæˆåŠŸæ‘¸é±¼ï¼Œä½ å°±å·ç€ä¹å§ã€‚\n\nğŸ’¡<b>å»ºè®®</b>ï¼šæå‰å®Œæˆä»»åŠ¡ï¼Œç„¶åå…‰æ˜æ­£å¤§åœ°æ‘¸é±¼ã€‚\n\nğŸ<b>å¹¸è¿ç‰©</b>ï¼šæ‰‹æœºï¼Œæ‘¸é±¼å¿…å¤‡ç¥å™¨ã€‚\n\nâœ…<b>å®œ</b>ï¼šæå‰å®Œæˆä»»åŠ¡ï¼Œè®©è€æ¿å¯¹ä½ åˆ®ç›®ç›¸çœ‹ã€‚\n\nâŒ<b>å¿Œ</b>ï¼šç‚«è€€æ•ˆç‡ï¼Œä¸ç„¶ä¼šå¼•èµ·åŒäº‹çš„å«‰å¦’ã€‚\n\nè€æ¿ç”»é¥¼æŒ‡æ•°ï¼šâ˜…â˜†â˜†â˜†â˜†\nå‡†ç‚¹ä¸‹ç­æ¦‚ç‡ï¼š80%',
                color: '#166534'
            },
            {
                type: 'good',
                title: 'ä¸Šç­¾ï¼šèŒåœºé”¦é²¤',
                desc: 'ğŸ¯<b>ä»Šæ—¥è¿åŠ¿</b>ï¼šæ­¤ç­¾ä¸»é¡ºï¼Œä»Šå¤©å·¥ä½œé¡ºé£é¡ºæ°´ï¼ŒåŒäº‹é…åˆåº¦é«˜ï¼Œé¢†å¯¼è¦æ±‚å°‘ï¼Œä½ å°±åƒä¸€æ¡è‡ªç”±è‡ªåœ¨çš„é”¦é²¤ï¼Œåœ¨å·¥ä½œçš„æµ·æ´‹é‡Œç•…æ¸¸ã€‚\n\nğŸ’¡<b>å»ºè®®</b>ï¼šå®œè¶æœºå®Œæˆç§¯å‹å·¥ä½œï¼Œåˆ«æµªè´¹äº†è¿™å¥½è¿æ°”ã€‚\n\nğŸ<b>å¹¸è¿ç‰©</b>ï¼šé”¦é²¤æŒ‚ä»¶ï¼Œå¸¦æ¥æ›´å¤šå¥½è¿ã€‚\n\nâœ…<b>å®œ</b>ï¼šè¶æœºå®Œæˆç§¯å‹å·¥ä½œï¼Œè®©è‡ªå·±è½»æ¾ä¸€äº›ã€‚\n\nâŒ<b>å¿Œ</b>ï¼šç‚«è€€å‡†æ—¶ä¸‹ç­ï¼Œä¸ç„¶ä¼šæ‹›æ¥åŒäº‹çš„æ€¨æ¨ã€‚\n\nå¹¸è¿æ—¶æ®µï¼šåˆä¼‘å',
                color: '#065f46'
            },
            {
                type: 'great',
                title: 'ä¸Šä¸Šç­¾ï¼šå¤©é€‰æ‰“å·¥äºº',
                desc: 'ğŸ¯<b>ä»Šæ—¥è¿åŠ¿</b>ï¼šæ­¤ç­¾å¤§å‰ï¼Œä»Šå¤©ä½ çš„è¿åŠ¿çˆ†æ£šï¼å·¥ä½œè½»æ¾å®Œæˆï¼Œé¢†å¯¼çªç„¶è¯·å‡ï¼Œä¸‹åˆèŒ¶æœ‰äººè¯·å®¢ï¼Œè¿˜å¯èƒ½æå‰ä¸‹ç­ï¼Œä½ è¿™æ˜¯ç¥–åŸå†’é’çƒŸäº†å§ã€‚\n\nğŸ’¡<b>å»ºè®®</b>ï¼šå®œä¹°å½©ç¥¨ï¼Œè¯´ä¸å®šèƒ½ä¸­ä¸ªå¤§å¥–ã€‚\n\nğŸ<b>å¹¸è¿ç‰©</b>ï¼šå½©ç¥¨ï¼Œè¯´ä¸å®šèƒ½è®©ä½ ä¸€å¤œæš´å¯Œã€‚\n\nâœ…<b>å®œ</b>ï¼šä¹°å½©ç¥¨ï¼Œè¯•è¯•è‡ªå·±çš„è¿æ°”ã€‚\n\nâŒ<b>å¿Œ</b>ï¼šå¾—æ„å¿˜å½¢ï¼Œä¸ç„¶å¥½è¿ä¼šæºœèµ°çš„ã€‚\n\næ‘¸é±¼æŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜…',
                color: '#3730a3'
            }
        ];

        // è·å–DOMå…ƒç´ 
        const signBucket = document.getElementById('signBucket');
        const signStick = document.getElementById('signStick');
        const resultContainer = document.getElementById('resultContainer');
        const resultTitle = document.getElementById('resultTitle');
        const resultDesc = document.getElementById('resultDesc');
        const shakeSound = document.getElementById('shakeSound');
        const signAppearSound = document.getElementById('signAppearSound');
        const goodFortuneSound = document.getElementById('goodFortuneSound');
        const badFortuneSound = document.getElementById('badFortuneSound');
        const soundToggle = document.getElementById('soundToggle');
        const loading = document.getElementById('loading');
        const shareBtn = document.getElementById('shareBtn');

        // éŸ³æ•ˆçŠ¶æ€
        let isSoundEnabled = true;

        // éŸ³æ•ˆæ§åˆ¶
        soundToggle.addEventListener('click', () => {
            isSoundEnabled = !isSoundEnabled;
            soundToggle.style.color = isSoundEnabled ? 'currentColor' : '#ff7f7f';
        });

        // æ’­æ”¾éŸ³æ•ˆçš„è¾…åŠ©å‡½æ•°
        function playSound(audio) {
            if (isSoundEnabled) {
                audio.currentTime = 0;
                audio.play().catch(e => console.log('éŸ³æ•ˆæ’­æ”¾å¤±è´¥:', e));
            }
        }

        // æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
        function showLoading() {
            loading.classList.add('show');
        }

        // éšè—åŠ è½½åŠ¨ç”»
        function hideLoading() {
            loading.classList.remove('show');
        }

        // åˆ†äº«åŠŸèƒ½
        function shareResult(result) {
            const text = `ä»Šæ—¥è¿åŠ¿ï¼š${result.title}\n${result.desc.replace(/<[^>]*>/g, '')}`;
            const shareData = {
                title: 'æ‰“å·¥ç‰›é©¬è¿åŠ¿ç­¾',
                text: text,
                url: window.location.href
            };
            
            // æ£€æŸ¥æ˜¯å¦æ”¯æŒWeb Share API
            if (navigator.share) {
                navigator.share(shareData)
                    .then(() => console.log('åˆ†äº«æˆåŠŸ'))
                    .catch((error) => {
                        console.log('åˆ†äº«å¤±è´¥:', error);
                        fallbackShare(text);
                    });
            } else {
                fallbackShare(text);
            }
        }

        // å¤‡ç”¨åˆ†äº«æ–¹æ³•
        function fallbackShare(text) {
            // åˆ›å»ºä¸´æ—¶textareaå…ƒç´ 
            const textarea = document.createElement('textarea');
            textarea.value = text;
            textarea.style.position = 'fixed';
            textarea.style.opacity = '0';
            document.body.appendChild(textarea);
            
            // é€‰æ‹©å¹¶å¤åˆ¶æ–‡æœ¬
            textarea.select();
            try {
                document.execCommand('copy');
                // æ˜¾ç¤ºæç¤º
                showToast('è¿åŠ¿å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
            } catch (err) {
                console.log('å¤åˆ¶å¤±è´¥:', err);
                showToast('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
            }
            
            // ç§»é™¤ä¸´æ—¶å…ƒç´ 
            document.body.removeChild(textarea);
        }

        // æ˜¾ç¤ºæç¤º
        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            // æ·»åŠ æ˜¾ç¤ºåŠ¨ç”»
            setTimeout(() => {
                toast.classList.add('show');
            }, 10);
            
            // 3ç§’åç§»é™¤
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 300);
            }, 3000);
        }

        let isShaking = false;

        // åˆ›å»ºç­¾æ–‡æ•ˆæœ
        function drawSign() {
            if (isShaking) return;

            isShaking = true;
            showLoading();
            resultContainer.classList.remove('show');
            signStick.classList.remove('show');
            signStick.textContent = '';
            shareBtn.style.display = 'none';

            // å¼€å§‹æ‘‡æ™ƒç­¾ç­’
            signBucket.classList.add('shaking');
            playSound(shakeSound);

            // æ‘‡æ™ƒ2ç§’åå‡ºç­¾
            setTimeout(() => {
                signBucket.classList.remove('shaking');

                // ç­¾æ–‡æ…¢æ…¢å‡ºç°
                signStick.classList.add('show');
                playSound(signAppearSound);

                // éšæœºé€‰æ‹©è¿åŠ¿
                const resultIndex = Math.floor(Math.random() * fortunes.length);
                const result = fortunes[resultIndex];

                // ç­¾ä¸Šåªæ˜¾ç¤ºç®€çŸ­çš„è¿åŠ¿ç­‰çº§
                signStick.textContent = result.title.split('ï¼š')[0];
                signStick.style.color = result.color;

                // 1ç§’åæ˜¾ç¤ºè¯¦ç»†ç»“æœ
                setTimeout(() => {
                    showResult(result);
                    isShaking = false;
                    hideLoading();
                    shareBtn.style.display = 'block';

                    // æ ¹æ®è¿åŠ¿ç±»å‹æ’­æ”¾ä¸åŒçš„éŸ³æ•ˆ
                    if (result.type === 'good' || result.type === 'great') {
                        createConfetti();
                        playSound(goodFortuneSound);
                    } else if (result.type === 'bad') {
                        playSound(badFortuneSound);
                    }
                    // ä¸­ç­‰è¿åŠ¿ä¸æ’­æ”¾éŸ³æ•ˆ
                }, 1000);
            }, 2000);
        }

        // æ˜¾ç¤ºç»“æœ
        function showResult(result) {
            resultTitle.textContent = result.title;
            resultDesc.innerHTML = result.desc.replace(/\n\n/g, '<br><br>');
            resultContainer.className = `result-container ${result.type} show`;
        }

        // åˆ›å»ºç¤¼èŠ±æ•ˆæœ
        function createConfetti() {
            const colors = ['#f59e0b', '#ef4444', '#3b82f6', '#10b981', '#6366f1', '#ec4899'];

            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.left = `${Math.random() * 100}vw`;
                confetti.style.width = `${Math.random() * 10 + 8}px`;
                confetti.style.height = `${Math.random() * 10 + 8}px`;
                confetti.style.animation = `confetti-fall ${Math.random() * 3 + 2}s linear forwards`;
                confetti.style.animationDelay = `${Math.random() * 0.5}s`;
                document.body.appendChild(confetti);

                // åŠ¨ç”»ç»“æŸåç§»é™¤å…ƒç´ 
                setTimeout(() => {
                    confetti.remove();
                }, 5000);
            }
        }

        // æ·»åŠ åˆ†äº«æŒ‰é’®äº‹ä»¶ç›‘å¬
        shareBtn.addEventListener('click', () => {
            const currentResult = fortunes.find(f => f.title === resultTitle.textContent);
            if (currentResult) {
                shareResult(currentResult);
            }
        });

        // ç‚¹å‡»ç­¾ç­’å¼€å§‹æŠ½ç­¾
        signBucket.addEventListener('click', drawSign);
    </script>
</body>

</html>


